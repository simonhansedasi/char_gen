<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Charactermancer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
        }
        h1, h2 {
            color: #333;
        }
        .character-info {
            margin-bottom: 20px;
        }
        .background-section {
            margin-top: 20px;
        }
        p {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <h1>Why don't you play a...</h1>

    <!-- Remove the form entirely -->
    <div id="character-container">
        <!-- This is where the character data will be inserted by JavaScript -->
    </div>

    <script>
        async function loadCharacter() {
            try {
                const response = await fetch("https://char_gen.onrender.com/", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    console.error("Failed to fetch character:", response.status, response.statusText);
                    throw new Error('Network response was not ok');
                }

                const characterData = await response.json(); // Parse JSON response
                console.log(characterData);

                // Dynamically insert character data into the HTML
                document.getElementById("character-container").innerHTML = `
                    <h2>${characterData.class} ${characterData.species}</h2>
                    <p><strong>Background:</strong> ${characterData.background}</p>
                    <p><strong>Character Background:</strong></p>
                    <div>${characterData.character_background}</div>
                    <h3>Stats:</h3>
                    <ul>
                        ${Object.entries(characterData.stats).map(([key, value]) => `<li>${key}: ${value}</li>`).join('')}
                    </ul>
                `;
            } catch (error) {
                console.error("Error loading character:", error);
                document.getElementById("character-container").innerText = "Error loading character data.";
            }
        }

        // Automatically load the character when the page loads
        window.onload = loadCharacter;
    </script>
</body>
</html>

